{
  "openapi": "3.0.0",
  "info": {
    "title": "API Contract Manager",
    "version": "1.4",
    "description": "Complete API documentation for Contract Manager application with all endpoints"
  },
  "servers": [
    {
      "url": "http://localhost:5000",
      "description": "Development server"
    }
  ],
  "components": {
    "securitySchemes": {
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    },
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "format": "uuid" },
          "email": { "type": "string", "format": "email" },
          "full_name": { "type": "string" },
          "is_archived": { "type": "boolean" },
          "created_at": { "type": "string", "format": "date-time" },
          "updated_at": { "type": "string", "format": "date-time" },
          "created_by": { "type": "string", "format": "uuid", "nullable": true },
          "updated_by": { "type": "string", "format": "uuid", "nullable": true }
        }
      },
      "UserInput": {
        "type": "object",
        "required": ["email", "password", "full_name"],
        "properties": {
          "email": { "type": "string", "format": "email" },
          "password": { "type": "string" },
          "full_name": { "type": "string" },
          "is_archived": { "type": "boolean", "default": false }
        }
      },
      "Client": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "format": "uuid" },
          "company_name": { "type": "string" },
          "email": { "type": "string", "format": "email" },
          "phone_number": { "type": "string" },
          "address": { "type": "string" },
          "is_archived": { "type": "boolean" },
          "created_at": { "type": "string", "format": "date-time" },
          "updated_at": { "type": "string", "format": "date-time" },
          "created_by": { "type": "string", "format": "uuid" },
          "updated_by": { "type": "string", "format": "uuid" }
        }
      },
      "ClientInput": {
        "type": "object",
        "required": ["company_name", "email", "phone_number", "address"],
        "properties": {
          "company_name": { "type": "string" },
          "email": { "type": "string", "format": "email" },
          "phone_number": { "type": "string" },
          "address": { "type": "string" },
          "is_archived": { "type": "boolean", "default": false }
        }
      },
      "Contract": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "format": "uuid" },
          "client_id": { "type": "string", "format": "uuid" },
          "contract_name": { "type": "string" },
          "billing_type": { 
            "type": "string",
            "enum": ["Monthly", "Quarterly", "Yearly"]
          },
          "payment_type": {
            "type": "string",
            "enum": ["Prepaid", "Postpaid"]
          },
          "is_archived": { "type": "boolean" },
          "created_at": { "type": "string", "format": "date-time" },
          "updated_at": { "type": "string", "format": "date-time" },
          "created_by": { "type": "string", "format": "uuid", "nullable": true },
          "updated_by": { "type": "string", "format": "uuid", "nullable": true }
        }
      },
      "ContractInput": {
        "type": "object",
        "required": ["client_id", "contract_name", "billing_type", "payment_type"],
        "properties": {
          "client_id": { "type": "string", "format": "uuid" },
          "contract_name": { "type": "string" },
          "billing_type": { 
            "type": "string",
            "enum": ["Monthly", "Quarterly", "Yearly"]
          },
          "payment_type": {
            "type": "string",
            "enum": ["Prepaid", "Postpaid"]
          },
          "is_archived": { "type": "boolean", "default": false }
        }
      },
      "Product": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "format": "uuid" },
          "api_name": { "type": "string" },
          "description": { "type": "string" },
          "is_archived": { "type": "boolean" },
          "created_at": { "type": "string", "format": "date-time" },
          "updated_at": { "type": "string", "format": "date-time" },
          "created_by": { "type": "string", "format": "uuid" },
          "updated_by": { "type": "string", "format": "uuid" }
        }
      },
      "ProductInput": {
        "type": "object",
        "required": ["api_name", "description"],
        "properties": {
          "api_name": { "type": "string" },
          "description": { "type": "string" },
          "is_archived": { "type": "boolean", "default": false }
        }
      },
      "Subscription": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "format": "uuid" },
          "contract_id": { "type": "string", "format": "uuid" },
          "product_id": { "type": "string", "format": "uuid" },
          "pricing_type": { 
            "type": "string",
            "enum": ["Fixed", "Variable"]
          },
          "strategy": { 
            "type": "string",
            "enum": ["Pick", "Fill", "Flat", "Fixed"]
          },
          "is_archived": { "type": "boolean" },
          "created_at": { "type": "string", "format": "date-time" },
          "updated_at": { "type": "string", "format": "date-time" },
          "created_by": { "type": "string", "format": "uuid", "nullable": true },
          "updated_by": { "type": "string", "format": "uuid", "nullable": true }
        }
      },
      "SubscriptionInput": {
        "type": "object",
        "required": ["contract_id", "product_id", "pricing_type", "strategy"],
        "properties": {
          "contract_id": { "type": "string", "format": "uuid" },
          "product_id": { "type": "string", "format": "uuid" },
          "pricing_type": { 
            "type": "string",
            "enum": ["Fixed", "Variable"]
          },
          "strategy": { 
            "type": "string",
            "enum": ["Pick", "Fill", "Flat", "Fixed"]
          },
          "is_archived": { "type": "boolean", "default": false }
        }
      },
      "SubscriptionTier": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "format": "uuid" },
          "subscription_id": { "type": "string", "format": "uuid" },
          "min_calls": { "type": "integer" },
          "max_calls": { "type": "integer" },
          "start_date": { "type": "string", "format": "date-time", "nullable": true },
          "end_date": { "type": "string", "format": "date-time", "nullable": true },
          "base_price": { "type": "number", "nullable": true },
          "price_per_tier": { "type": "number", "nullable": true },
          "is_archived": { "type": "boolean" },
          "created_at": { "type": "string", "format": "date-time" },
          "updated_at": { "type": "string", "format": "date-time" },
          "created_by": { "type": "string", "format": "uuid", "nullable": true },
          "updated_by": { "type": "string", "format": "uuid", "nullable": true }
        }
      },
      "SubscriptionTierInput": {
        "type": "object",
        "required": ["subscription_id", "min_calls", "max_calls", "base_price", "price_per_tier"],
        "properties": {
          "subscription_id": { "type": "string", "format": "uuid" },
          "min_calls": { "type": "integer" },
          "max_calls": { "type": "integer" },
          "start_date": { "type": "string", "format": "date-time" },
          "end_date": { "type": "string", "format": "date-time" },
          "base_price": { "type": "number" },
          "price_per_tier": { "type": "number" },
          "is_archived": { "type": "boolean", "default": false }
        }
      },
      "LoginRequest": {
        "type": "object",
        "required": ["email", "password"],
        "properties": {
          "email": { "type": "string", "format": "email" },
          "password": { "type": "string" }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "message": { "type": "string" },
          "error": { "type": "string" }
        }
      }
      ,
      "Invoice": {
        "type": "object",
        "properties": {
          "id": { "type": "string", "format": "uuid" },
          "contract_id": { "type": "string", "format": "uuid" },
          "total_amount": { "type": "number" },
          "is_archived": { "type": "boolean" },
          "start_date": { "type": "string", "format": "date-time" },
          "end_date": { "type": "string", "format": "date-time" },
          "created_at": { "type": "string", "format": "date-time" },
          "updated_at": { "type": "string", "format": "date-time" },
          "created_by": { "type": "string", "format": "uuid", "nullable": true },
          "updated_by": { "type": "string", "format": "uuid", "nullable": true }
        }
      },
      "InvoiceInput": {
        "type": "object",
        "required": ["contract_id", "total_amount", "start_date", "end_date"],
        "properties": {
          "contract_id": { "type": "string", "format": "uuid" },
          "total_amount": { "type": "number" },
          "start_date": { "type": "string", "format": "date-time" },
          "end_date": { "type": "string", "format": "date-time" },
          "is_archived": { "type": "boolean", "default": false }
        }
      }
    }
  },
  "paths": {
    "/login": {
      "post": {
        "tags": ["Authentication"],
        "summary": "User login with JWT authentication",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/LoginRequest" }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "access_token": { "type": "string" }
                  }
                }
              }
            }
          },
          "401": { "description": "Wrong password or username" },
          "405": { "description": "Invalid request method" },
          "500": { "description": "Server error" }
        }
      }
    },
    "/protected": {
      "get": {
        "tags": ["Authentication"],
        "summary": "Protected endpoint - requires valid JWT",
        "security": [{ "BearerAuth": [] }],
        "responses": {
          "200": {
            "description": "Access granted",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "logged_in_as": { "type": "string" }
                  }
                }
              }
            }
          },
          "404": { "description": "User not found" }
        }
      }
    },
    "/UsersFirst": {
      "post": {
        "tags": ["Users"],
        "summary": "Create the first user in the system (when DB is empty)",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/UserInput" }
            }
          }
        },
        "responses": {
          "201": {
            "description": "First user created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "user_id": { "type": "string", "format": "uuid" }
                  }
                }
              }
            }
          },
          "500": { "description": "Error creating first user" }
        }
      }
    },
    "/Users": {
      "get": {
        "tags": ["Users"],
        "summary": "Get all users",
        "security": [{ "BearerAuth": [] }],
        "responses": {
          "200": {
            "description": "List of all users",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "users": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/User" }
                    }
                  }
                }
              }
            }
          },
          "500": { "description": "Error getting users" }
        }
      },
      "post": {
        "tags": ["Users"],
        "summary": "Create a new user",
        "security": [{ "BearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/UserInput" }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "user_id": { "type": "string", "format": "uuid" }
                  }
                }
              }
            }
          },
          "500": { "description": "Error creating user" }
        }
      }
    },
    "/Users/{id}": {
      "get": {
        "tags": ["Users"],
        "summary": "Get user by ID",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "User details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "user": { "$ref": "#/components/schemas/User" }
                  }
                }
              }
            }
          },
          "404": { "description": "User not found" },
          "500": { "description": "Error getting user" }
        }
      },
      "put": {
        "tags": ["Users"],
        "summary": "Update user by ID",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": { "type": "string", "format": "email" },
                  "full_name": { "type": "string" },
                  "password": { "type": "string" },
                  "is_archived": { "type": "boolean" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "User updated successfully" },
          "404": { "description": "User not found" },
          "500": { "description": "Error updating user" }
        }
      },
      "delete": {
        "tags": ["Users"],
        "summary": "Archive user by ID (soft delete)",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": { "description": "User archived successfully" },
          "404": { "description": "User not found" },
          "500": { "description": "Error archiving user" }
        }
      }
    },
    "/Users/{id}/Contracts": {
      "get": {
        "tags": ["Users"],
        "summary": "Get all contracts created by a user",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of contracts created by user",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "contracts": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Contract" }
                    }
                  }
                }
              }
            }
          },
          "404": { "description": "User not found" },
          "500": { "description": "Error getting user contracts" }
        }
      }
    },
    "/Clients": {
      "get": {
        "tags": ["Clients"],
        "summary": "Get all clients",
        "security": [{ "BearerAuth": [] }],
        "responses": {
          "200": {
            "description": "List of all clients",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "clients": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Client" }
                    }
                  }
                }
              }
            }
          },
          "500": { "description": "Error getting clients" }
        }
      },
      "post": {
        "tags": ["Clients"],
        "summary": "Create a new client",
        "security": [{ "BearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ClientInput" }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Client created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "client_id": { "type": "string", "format": "uuid" }
                  }
                }
              }
            }
          },
          "500": { "description": "Error creating client" }
        }
      }
    },
    "/Clients/{id}": {
      "get": {
        "tags": ["Clients"],
        "summary": "Get client by ID",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Client details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "client": { "$ref": "#/components/schemas/Client" }
                  }
                }
              }
            }
          },
          "404": { "description": "Client not found" },
          "500": { "description": "Error getting client" }
        }
      },
      "put": {
        "tags": ["Clients"],
        "summary": "Update client by ID",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "company_name": { "type": "string" },
                  "email": { "type": "string", "format": "email" },
                  "phone_number": { "type": "string" },
                  "address": { "type": "string" },
                  "is_archived": { "type": "boolean" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Client updated successfully" },
          "404": { "description": "Client not found" },
          "500": { "description": "Error updating client" }
        }
      },
      "delete": {
        "tags": ["Clients"],
        "summary": "Archive client by ID (soft delete)",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": { "description": "Client deleted successfully" },
          "404": { "description": "Client not found" },
          "500": { "description": "Error deleting client" }
        }
      }
    },
    "/Clients/{id}/Contracts": {
      "get": {
        "tags": ["Clients"],
        "summary": "Get all contracts for a client",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of contracts for client",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "contracts": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Contract" }
                    }
                  }
                }
              }
            }
          },
          "404": { "description": "Client not found" },
          "500": { "description": "Error getting contracts" }
        }
      }
    },
    "/Contracts": {
      "get": {
        "tags": ["Contracts"],
        "summary": "Get all contracts",
        "security": [{ "BearerAuth": [] }],
        "responses": {
          "200": {
            "description": "List of all contracts",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "contracts": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Contract" }
                    }
                  }
                }
              }
            }
          },
          "500": { "description": "Error getting contracts" }
        }
      },
      "post": {
        "tags": ["Contracts"],
        "summary": "Create a new contract",
        "security": [{ "BearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ContractInput" }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Contract created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "contract_id": { "type": "string", "format": "uuid" }
                  }
                }
              }
            }
          },
          "500": { "description": "Error creating contract" }
        }
      }
    },
    "/Contracts/{id}": {
      "get": {
        "tags": ["Contracts"],
        "summary": "Get contract by ID",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Contract details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "contract": { "$ref": "#/components/schemas/Contract" }
                  }
                }
              }
            }
          },
          "404": { "description": "Contract not found" },
          "500": { "description": "Error getting contract" }
        }
      },
      "put": {
        "tags": ["Contracts"],
        "summary": "Update contract by ID",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "client_id": { "type": "string", "format": "uuid" },
                  "contract_name": { "type": "string" },
                  "is_archived": { "type": "boolean" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Contract updated successfully" },
          "404": { "description": "Contract not found" },
          "500": { "description": "Error updating contract" }
        }
      },
      "delete": {
        "tags": ["Contracts"],
        "summary": "Archive contract by ID (soft delete)",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": { "description": "Contract has been archived successfully" },
          "404": { "description": "Contract not found" },
          "500": { "description": "Error deleting contract" }
        }
      }
    },
    "/Contracts/{id}/Product": {
      "get": {
        "tags": ["Contracts"],
        "summary": "Get all products associated with a contract",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of products for contract",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "products": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Product" }
                    }
                  }
                }
              }
            }
          },
          "404": { "description": "Contract not found" },
          "500": { "description": "Error getting products" }
        }
      }
    },
    "/Products": {
      "get": {
        "tags": ["Products"],
        "summary": "Get all products",
        "security": [{ "BearerAuth": [] }],
        "responses": {
          "200": {
            "description": "List of all products",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "products": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Product" }
                    }
                  }
                }
              }
            }
          },
          "500": { "description": "Error getting products" }
        }
      },
      "post": {
        "tags": ["Products"],
        "summary": "Create a new product",
        "security": [{ "BearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ProductInput" }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Product created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "product_id": { "type": "string", "format": "uuid" }
                  }
                }
              }
            }
          },
          "500": { "description": "Error creating product" }
        }
      }
    },
    "/Products/{id}": {
      "get": {
        "tags": ["Products"],
        "summary": "Get product by ID",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Product details",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "product": { "$ref": "#/components/schemas/Product" }
                  }
                }
              }
            }
          },
          "404": { "description": "Product not found" },
          "500": { "description": "Error getting product" }
        }
      },
      "put": {
        "tags": ["Products"],
        "summary": "Update product by ID",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "api_name": { "type": "string" },
                  "description": { "type": "string" },
                  "is_archived": { "type": "boolean" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Product updated successfully" },
          "404": { "description": "Product not found" },
          "500": { "description": "Error updating product" }
        }
      },
      "delete": {
        "tags": ["Products"],
        "summary": "Archive product by ID (soft delete)",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": { "description": "Product has been archived successfully" },
          "404": { "description": "Product not found" },
          "500": { "description": "Error archiving product" }
        }
      }
    },
    "/Products/{id}/Contracts": {
      "get": {
        "tags": ["Products"],
        "summary": "Get all contracts using a product",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of contracts using product",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "contracts": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Contract" }
                    }
                  }
                }
              }
            }
          },
          "404": { "description": "Product not found" },
          "500": { "description": "Error getting contracts" }
        }
      }
    },
    "/Subscriptions": {
      "get": {
        "tags": ["Subscriptions"],
        "summary": "Get all subscriptions",
        "security": [{ "BearerAuth": [] }],
        "responses": {
          "200": {
            "description": "List of all subscriptions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/Subscription" }
                }
              }
            }
          },
          "500": { "description": "Error fetching subscriptions" }
        }
      },
      "post": {
        "tags": ["Subscriptions"],
        "summary": "Create a new subscription",
        "security": [{ "BearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/SubscriptionInput" }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Subscription created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "subscription_id": { "type": "string", "format": "uuid" }
                  }
                }
              }
            }
          },
          "500": { "description": "Error creating subscription" }
        }
      }
    },
    "/Subscriptions/{id}": {
      "get": {
        "tags": ["Subscriptions"],
        "summary": "Get subscription by ID",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Subscription details",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Subscription" }
              }
            }
          },
          "404": { "description": "Subscription not found" },
          "500": { "description": "Error getting subscription" }
        }
      },
      "put": {
        "tags": ["Subscriptions"],
        "summary": "Update subscription by ID",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "contract_id": { "type": "string", "format": "uuid" },
                  "product_id": { "type": "string", "format": "uuid" },
                  "pricing_type": { 
                    "type": "string",
                    "enum": ["Fixed", "Variable"]
                  },
                  "strategy": { 
                    "type": "string",
                    "enum": ["Pick", "Fill", "Flat", "Fixed"]
                  },
                  "is_archived": { "type": "boolean" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Subscription updated successfully" },
          "404": { "description": "Subscription not found" },
          "500": { "description": "Error updating subscription" }
        }
      },
      "delete": {
        "tags": ["Subscriptions"],
        "summary": "Archive subscription by ID (soft delete)",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": { "description": "Subscription has been archived successfully" },
          "404": { "description": "Subscription not found" },
          "500": { "description": "Error archiving subscription" }
        }
      }
    },
    "/Subscriptions/{id}/Tiers": {
      "get": {
        "tags": ["Subscriptions"],
        "summary": "Get all tiers for a subscription",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of subscription tiers",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/SubscriptionTier" }
                }
              }
            }
          },
          "404": { "description": "Subscription not found" },
          "500": { "description": "Error fetching subscription tiers" }
        }
      }
    },
    "/Subscription_tiers": {
      "get": {
        "tags": ["Subscription Tiers"],
        "summary": "Get all subscription tiers",
        "security": [{ "BearerAuth": [] }],
        "responses": {
          "200": {
            "description": "List of all subscription tiers",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/SubscriptionTier" }
                }
              }
            }
          },
          "500": { "description": "Error fetching subscription tiers" }
        }
      },
      "post": {
        "tags": ["Subscription Tiers"],
        "summary": "Create a new subscription tier",
        "security": [{ "BearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/SubscriptionTierInput" }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Subscription tier created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "tier_id": { "type": "string", "format": "uuid" }
                  }
                }
              }
            }
          },
          "500": { "description": "Error creating subscription tier" }
        }
      }
    },
    "/Subscription_tiers/{id}": {
      "get": {
        "tags": ["Subscription Tiers"],
        "summary": "Get subscription tier by ID",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Subscription tier details",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/SubscriptionTier" }
              }
            }
          },
          "404": { "description": "Subscription tier not found" },
          "500": { "description": "Error fetching subscription tier" }
        }
      },
      "put": {
        "tags": ["Subscription Tiers"],
        "summary": "Update subscription tier by ID",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "tier_name": { "type": "string" },
                  "min_calls": { "type": "integer" },
                  "max_calls": { "type": "integer" },
                  "start_date": { "type": "string", "format": "date-time" },
                  "end_date": { "type": "string", "format": "date-time" },
                  "base_price": { "type": "number" },
                  "price_per_tier": { "type": "number" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Subscription tier updated successfully" },
          "404": { "description": "Subscription tier not found" },
          "500": { "description": "Error updating subscription tier" }
        }
      },
      "delete": {
        "tags": ["Subscription Tiers"],
        "summary": "Archive subscription tier by ID (soft delete)",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": { "description": "Subscription tier archived successfully" },
          "404": { "description": "Subscription tier not found" },
          "500": { "description": "Error archiving subscription tier" }
        }
      }
    },
    "/Subscription_tiers/{id}/Subscriptions": {
      "get": {
        "tags": ["Subscription Tiers"],
        "summary": "Get all subscriptions for a tier",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "List of subscriptions for tier",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/Subscription" }
                }
              }
            }
          },
          "404": { "description": "Subscription tier not found" },
          "500": { "description": "Error fetching subscriptions for tier" }
        }
      }
    },
    "/invoice": {
      "post": {
        "tags": ["Invoices"],
        "summary": "Create a new invoice",
        "security": [{ "BearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/InvoiceInput" }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Invoice created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "invoice_id": { "type": "string", "format": "uuid" }
                  }
                }
              }
            }
          },
          "500": { "description": "Error creating invoice" }
        }
      },
      "get": {
        "tags": ["Invoices"],
        "summary": "Get all invoices",
        "security": [{ "BearerAuth": [] }],
        "responses": {
          "200": {
            "description": "List of all invoices",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/Invoice" }
                }
              }
            }
          },
          "500": { "description": "Error getting invoices" }
        }
      }
    },
    "/invoice/{id}": {
      "get": {
        "tags": ["Invoices"],
        "summary": "Get invoice by ID",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": {
            "description": "Invoice details",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Invoice" }
              }
            }
          },
          "404": { "description": "Invoice not found" },
          "500": { "description": "Error getting invoice" }
        }
      },
      "put": {
        "tags": ["Invoices"],
        "summary": "Update invoice by ID",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "contract_id": { "type": "string", "format": "uuid" },
                  "total_amount": { "type": "number" },
                  "start_date": { "type": "string", "format": "date-time" },
                  "end_date": { "type": "string", "format": "date-time" },
                  "is_archived": { "type": "boolean" }
                }
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Invoice updated successfully" },
          "404": { "description": "Invoice not found" },
          "500": { "description": "Error updating invoice" }
        }
      },
      "delete": {
        "tags": ["Invoices"],
        "summary": "Archive invoice by ID (soft delete)",
        "security": [{ "BearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": { "type": "string", "format": "uuid" }
          }
        ],
        "responses": {
          "200": { "description": "Invoice archived successfully" },
          "404": { "description": "Invoice not found" },
          "500": { "description": "Error archiving invoice" }
        }
      }
    }
  }
}